/* ========== Base ========== */
*{box-sizing:border-box}
html,body{height:100%}
html{-webkit-text-size-adjust:100%}
body{margin:0;font-family:'Rubik',system-ui,sans-serif;background:linear-gradient(180deg,#eef2f6,#e9eff7);color:#0f172a}
:root{--phone-w:24.375rem;--phone-h:52.75rem}

/* ========== Layout Shell ========== */
.o-inner{margin-inline:auto;width:100%;max-width:var(--phone-w)}
.o-page{min-height:100dvh;display:grid;place-items:stretch;background:#fff}
.o-phone{width:100%;min-height:100dvh;background:#fff;padding:calc(env(safe-area-inset-top) + 16px) 16px calc(env(safe-area-inset-bottom) + 16px);display:flex;flex-direction:column}
@media (min-width:420px){
  .o-page{place-items:center;background:linear-gradient(180deg,#eef2f6,#e9eff7)}
  .o-phone{max-width:var(--phone-w);min-height:calc(100dvh - 2rem);border-radius:1rem;box-shadow:0 10px 28px rgba(15,23,42,.12);padding:18px}
}

/* ========== Header ========== */
.o-header{display:grid;grid-template-columns:1fr auto 1fr;grid-template-rows:auto auto auto auto;align-items:center;text-align:center;row-gap:.08rem}
.c-topbtn{inline-size:2.4rem;block-size:2.4rem;border-radius:50%;border:1px solid rgba(0,0,0,.06);background:radial-gradient(120% 120% at 40% 30%, rgba(255,255,255,.85), rgba(255,255,255,0)),linear-gradient(160deg,#FFF6CC,#FFE37A);box-shadow:inset 0 0 .25rem rgba(255,255,255,.7),0 .15rem .35rem rgba(0,0,0,.1);display:grid;place-items:center;color:#4B5563;transition:transform .15s ease}
.c-topbtn:hover{transform:translateY(-1px)} .c-topbtn:active{transform:translateY(1px)}
#btnProfile{grid-column:1;grid-row:1;justify-self:start}
#btnMenu{grid-column:3;grid-row:1;justify-self:end}

/* Title */
.c-app-title{grid-column:2;grid-row:1;margin:0}
.c-app-title__word{font-family:'Cormorant Garamond',serif;font-weight:900;letter-spacing:.02em;font-size:2.86rem;background:linear-gradient(90deg,#5e4e2e,#c79a29,#e9d8a6,#5e4e2e);-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 1px 0 rgba(255,255,255,.6),0 10px 20px rgba(199,154,41,.18)}

/* Lemon button (single kept version, slightly bigger) */
.c-icon-btn--lemon{
  inline-size:2.9rem;block-size:2.9rem;border-radius:1rem;border:1px solid rgba(0,0,0,.06);
  display:grid;place-items:center;
  background:radial-gradient(140% 120% at 35% 30%, #fff 0%, rgba(255,255,255,.35) 45%, rgba(255,255,255,0) 70%),
             linear-gradient(180deg,#FFF7D1,#FFE48A);
  box-shadow:inset 0 0 .5rem rgba(255,255,255,.75),0 .3rem .85rem rgba(0,0,0,.1),0 0 0 8px rgba(255,231,122,.15)
}
.c-icon-btn--lemon .lemon-svg{width:92%;height:92%}

/* ========== In-page Nav ========= */
.c-nav{grid-column:1/-1;grid-row:3;margin-top:0}
.c-nav__panel{overflow:hidden;max-height:0;opacity:.0;transform:translateY(-.2rem);transition:max-height .26s cubic-bezier(.16,1,.3,1),opacity .2s,transform .26s;background:rgba(255,255,255,.96);backdrop-filter:blur(8px);border:1px solid rgba(0,0,0,.06);border-radius:.75rem;padding:.625rem;position:relative}
.c-nav.u-is-collapsed .c-nav__panel{padding-block:0;border-width:0}
.c-nav:not(.u-is-collapsed){margin-top:.08rem}
.c-nav:not(.u-is-collapsed) .c-nav__panel{max-height:6rem;opacity:1;transform:none}
.c-nav__row{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:.5rem}
.c-icon-btn{inline-size:2rem;block-size:2rem;display:grid;place-items:center;border:1px solid rgba(50,50,70,.15);border-radius:.75rem;background:radial-gradient(circle at 30% 20%,rgba(255,255,255,.85),rgba(255,255,255,0)),linear-gradient(145deg,#F8F5EF,#EDE7DC);box-shadow:inset 0 0 .25rem rgba(255,255,255,.55),0 .15rem .35rem rgba(0,0,0,.08);color:#32324C}

/* Search (deduped) */
.c-search{position:relative;display:block}
.c-search__input{inline-size:100%;block-size:2.25rem;padding-inline:1.75rem .75rem;border-radius:.75rem;border:1px solid rgba(0,0,0,.08);background:linear-gradient(180deg,#fff,#f7f7fa)}
.c-search__icon{position:absolute;inset-inline-start:.625rem;inset-block-start:50%;transform:translateY(-50%);opacity:.65}
.c-search__go{position:absolute;inset-inline-end:.55rem;inset-block-start:50%;transform:translateY(-50%);border:0;background:transparent;padding:0;line-height:0;color:#475569;opacity:.8}
.c-search__clear{position:absolute;inset-inline-start:.55rem;inset-block-start:50%;transform:translateY(-50%);border:0;background:transparent;font-size:1.25rem;line-height:1;color:#64748b;display:none}
.c-search__input:not(:placeholder-shown) ~ .c-search__clear{display:block}

/* Suggestions dropdown (single kept) */
.sug-wrap{position:absolute;inset-inline:0;inset-block-start:calc(100% + .4rem);border:1px solid #e5e7eb;border-radius:14px;background:#fff;box-shadow:0 10px 26px rgba(15,23,42,.12);overflow:hidden;z-index:30;max-height:0;opacity:0;transform:translateY(-8px);transition:max-height .24s ease,opacity .2s ease,transform .24s ease}
.sug-wrap.is-open{max-height:60vh;opacity:1;transform:none}
.sug-head{padding:.45rem .75rem;font-weight:700;background:#fafafa;border-bottom:1px solid #f1f5f9}
.sug-list{max-height:60vh;overflow:auto;padding:.55rem .55rem .7rem}
.sug-item{display:grid;grid-template-columns:1fr auto;gap:.4rem;align-items:center;border:1px solid #edf2f7;border-radius:12px;background:#fff;padding:.55rem .6rem}
.sug-title{margin:0;font-weight:800;color:#0f172a}
.sug-row{display:flex;gap:.3rem;flex-wrap:wrap;color:#475569;font-size:.9rem}
.sug-tag{font-size:.78rem;padding:.1rem .45rem;border:1px solid #e5e7eb;border-radius:999px;background:#fff}
.sug-actions{display:flex;gap:.35rem}
.sug-btn{padding:.35rem .55rem;border-radius:.6rem;border:1px solid #e5e7eb;background:#f6f5f2;font-size:.85rem}
.sug-btn--primary{background:linear-gradient(90deg,#0ea5e9,#2563eb);color:#fff;border:0}

/* Date strip */
.c-meta-block{grid-column:1/-1;grid-row:4;margin-top:.1rem}
.c-title--date{display:inline-block;padding:.16rem .44rem;border-radius:.44rem;background:linear-gradient(180deg,#fff6ae 0%,#ffe77a 100%);font-weight:800}
.c-subtitle{margin:.28rem 0 0;color:#475569;font-size:1.02rem}
.c-subtitle b,.c-subtitle strong{font-weight:800}

/* View switch + planner container */
.c-cta-wrap{display:grid;justify-items:center;margin:.42rem 0 .2rem}
.c-view-switch{display:flex;gap:.5rem}
.c-headbtn{min-width:4.8rem;padding:.65rem 1.1rem;border-radius:999px;border:1px solid #e5e7eb;background:#f6f5f2}
.c-headbtn.is-active{background:linear-gradient(180deg,#fff6ae,#ffe77a);color:#0f172a;border-color:#e5c65e;box-shadow:0 .45rem .95rem rgba(199,154,41,.18)}
.c-planner{margin:.35rem 0 4.75rem}

/* ========== DAY ========== */
.p-dayview{display:grid;gap:.6rem}
.p-dayview__head{display:flex;justify-content:space-between;align-items:baseline;padding-inline:.2rem}
.p-dayview__title{font-weight:700;color:#0f172a}
.p-dayview__date{color:#475569;font-size:.95rem}
.p-daytask{display:grid;grid-template-columns:minmax(0,1fr) 96px auto;align-items:center;padding:.7rem .8rem;border-radius:16px;background:radial-gradient(120% 100% at 0% 0%,#fffef4 0%,#fffaf0 40%,#fff8ea 100%);border:1px solid #e7d8a1;box-shadow:0 1px 0 rgba(121,85,0,.06),0 8px 18px rgba(121,85,0,.06)}
.p-daytask__text{font-family:"Cormorant Garamond",serif;font-size:1.05rem;white-space:normal;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;color:#1f2937}
.p-daytask__time{text-align:center;font-weight:700;padding:.25rem .6rem;border-radius:999px;border:1px solid #d6c27b;background:#fff8d6;color:#4b5563}
.p-daytask__actions{display:flex;justify-content:flex-end;gap:.35rem}
.p-daytask__btn{border:1px solid #e5e7eb;background:#fff;border-radius:12px;padding:.28rem .6rem;font-size:.85rem}
.p-empty{color:#94a3b8;padding:.4rem}

/* ========== WEEK ========== */
.p-weekbar,.p-monthbar{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;margin:.3rem 0 .6rem;gap:.5rem}
.p-weekbar__btn,.p-monthbar__btn{padding:.35rem .65rem;border-radius:999px;border:1px solid #e5e7eb;background:#fff}
.p-weekbar__title,.p-monthbar__title{font-weight:800;text-align:center}
.p-weekbar__right,.p-monthbar__right{justify-self:end;display:flex;gap:.35rem}

.p-week{display:grid;gap:.55rem}
.p-day{background:#fff;border-radius:14px;padding:.6rem .7rem;border:1px solid rgba(197,154,33,.25);box-shadow:0 0 18px rgba(199,154,41,.12);cursor:pointer;position:relative}
.p-day--today{box-shadow:0 0 0 2px rgba(199,154,41,.6),0 10px 22px rgba(199,154,41,.18)}

.p-week .p-day__head{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;column-gap:.5rem;margin-bottom:.35rem}
.p-week .p-day__name{justify-self:start;text-align:right;margin:0;font-weight:700;color:#0f172a}
.p-week .p-day__date{justify-self:end;text-align:left;margin:0;opacity:.9;color:#64748b;font-weight:800}
.p-week .p-day__count{justify-self:center;inline-size:24px;height:24px;border-radius:50%;font:700 12px/24px 'Rubik',system-ui,sans-serif;border:1px solid currentColor;background:rgba(255,255,255,.9);box-shadow:0 2px 6px rgba(0,0,0,.08)}
html[data-theme="dark"] .p-week .p-day__count{background:rgba(13,23,44,.9)}

.p-task{display:grid;grid-template-columns:minmax(0,1fr) 84px auto;align-items:center;padding:.55rem .6rem;border:1px solid #e7d8a1;border-radius:14px;margin-bottom:.35rem;background:radial-gradient(120% 100% at 0% 0%,#fffef4 0%,#fffaf0 40%,#fff8ea 100%)}
.p-task__text{white-space:normal;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.p-task__time{text-align:center;font-weight:600;border:1px solid #d6c27b;border-radius:999px;background:#fff8d6;padding:.2rem .5rem}
.p-task__actions{display:flex;justify-content:flex-end;gap:.35rem}
.p-task__btn{border:1px solid #e5e7eb;background:#fff;border-radius:10px;padding:.25rem .45rem;font-size:.85rem}

/* ========== MONTH ========== */
.p-month{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem}
.p-cell{position:relative;aspect-ratio:1/1;border-radius:16px;cursor:pointer;background:#fff;border:1px solid #edf2f7;box-shadow:0 0 16px rgba(199,154,41,.09);display:grid;place-items:center;padding:.35rem}
.p-cell__num{font-weight:900;color:#274c77;position:relative;z-index:1}
/* classy conic ring using --ring (0–100) and --tone */
.p-cell__num::after{
  content:"";position:absolute;inset:-8px;border-radius:50%;pointer-events:none;z-index:0;
  background:
    radial-gradient(closest-side, transparent calc(100% - 6px), var(--tone,#93c5fd) 0 100%) top/100% 100% no-repeat,
    conic-gradient(var(--tone,#3b82f6) var(--ring,0%), #e2e8f0 0);
  opacity:.95;mix-blend-mode:multiply
}
.p-cell--today{box-shadow:0 0 0 2px rgba(199,154,41,.65),0 10px 22px rgba(199,154,41,.18)}
.p-cell--selected{box-shadow:inset 0 0 0 2px #3b82f6;border-color:#bfdbfe}
.p-cell--pad{background:#fafafc;border-color:#f0f2f6}
.p-cell--pad .p-cell__num{color:#9aa4b2}

/* ========== Bottom CTAs (stacked) ========== */
.c-bottom-cta{position:sticky;bottom:max(12px,env(safe-area-inset-bottom));display:grid;gap:.6rem;justify-items:center;background:transparent}
.c-cta{inline-size:78%;max-inline-size:16.25rem;block-size:3.1rem;border-radius:999px;border:0;color:#f4e2f4;font-weight:800;letter-spacing:.02em;background:linear-gradient(90deg,#0ea5e9,#2563eb);box-shadow:0 .625rem 1.25rem rgba(2,132,199,.25)}
#btnExit{display:grid;place-items:center;inline-size:78%;max-inline-size:16.25rem;block-size:2.6rem;border-radius:999px;border:1px solid rgba(0,0,0,.08);background:linear-gradient(180deg,#ffffff,#f7f7fa);box-shadow:0 .5rem 1.25rem rgba(15,23,42,.10)}

/* ========== Bottom Sheet ========== */
.c-sheet{position:fixed;inset:0;z-index:40}
.c-sheet__backdrop{position:absolute;inset:0;background:rgba(15,23,42,.45);backdrop-filter:blur(2px)}
.c-sheet__panel{position:absolute;inset-inline:0;bottom:0;margin:0 auto;width:100%;max-width:var(--phone-w);border-radius:1rem 1rem 0 0;background:radial-gradient(200% 140% at 50% -20%, #fff9e8 0%, #f7edd9 40%, #f4efe6 100%);border:1px solid rgba(197,154,33,.25);box-shadow:0 -0.75rem 1.875rem rgba(15,23,42,.18),inset 0 .125rem .5rem rgba(255,255,255,.6);transform:translateY(100%);transition:transform .28s cubic-bezier(.16,1,.3,1);padding:1rem .875rem 1.25rem}
.c-sheet.is-open .c-sheet__panel{transform:translateY(0)}
.c-sheet.u-hidden{display:none}
.c-sheet__header{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}
.c-sheet__title{margin:0;font-family:'Cormorant Garamond',serif;font-weight:600;letter-spacing:.02em;background:linear-gradient(90deg,#5b7cfa,#8b5cf6,#a78bfa);-webkit-background-clip:text;background-clip:text;color:transparent}
.c-icon-btn--ghost{border:0;background:transparent;font-size:1.125rem}
.c-sheet__actions{display:flex;justify-content:flex-end;gap:.5rem;margin-top:.6rem}
.c-btn{padding:.55rem .9rem;border-radius:.7rem;border:1px solid rgba(0,0,0,.08)}
.c-btn--ghost{background:#fff}
.c-btn--primary{background:linear-gradient(90deg,#0ea5e9,#2563eb);color:#fff;border:0}
.c-sheet__header .c-icon-btn--ghost{padding:.2rem .5rem;border-radius:.75rem}
.c-sheet__header .c-icon-btn--ghost:active{transform:translateY(1px)}

/* Modern inputs + quick chips (kept once) */
.f-grid{display:grid;grid-template-columns:1fr 1fr;gap:.6rem}
.f-field{display:grid;gap:.25rem;margin:.5rem 0}
.f-field--icon{position:relative}
.f-label{font-weight:600;color:#374151}
.f-input{inline-size:100%;block-size:2.4rem;border-radius:.8rem;border:1px solid rgba(0,0,0,.08);background:#fff;padding-inline:.9rem 2.2rem}
.f-input--big{block-size:2.8rem;font-size:1.05rem}
.f-field--elevated .f-input{background:linear-gradient(180deg,#fff,#f7f7fa);box-shadow:inset 0 1px 0 rgba(255,255,255,.9),0 1px 0 rgba(0,0,0,.03)}
.f-icon{position:absolute;inset-inline-start:.6rem;inset-block-start:55%;transform:translateY(-50%);opacity:.7}

.f-field .f-input[type="date"],.f-field .f-input[type="time"]{
  appearance:none;inline-size:100%;block-size:3rem;border-radius:.9rem;border:1px solid rgba(0,0,0,.08);
  background:linear-gradient(180deg,#fff,#f7f7fa);padding-inline:.95rem 2.4rem;font-size:1.06rem;letter-spacing:.02em
}

.qp{margin-top:.4rem;display:grid;gap:.45rem}
.qp__row{display:flex;gap:.45rem;flex-wrap:wrap;align-items:center}
.qp__label{color:#475569;font-weight:700}
.qp__chip{padding:.48rem .85rem;border-radius:999px;border:1px solid #e5e7eb;background:#fff;cursor:pointer;box-shadow:0 .5rem 1rem rgba(15,23,42,.06);transition:transform .08s ease,box-shadow .2s ease}
.qp__chip:hover{box-shadow:0 .6rem 1.1rem rgba(15,23,42,.1)}
.qp__chip:active{transform:translateY(1px)}

/* Effects */
.is-scratching{position:relative;overflow:hidden}
.is-scratching::after{content:"";position:absolute;inset:-2px;background:repeating-linear-gradient(135deg, rgba(255,255,255,.95) 0 6px, rgba(0,0,0,0) 6px 12px);animation:scratchOut 520ms ease forwards}
@keyframes scratchOut{to{transform:translateX(40%);opacity:0}}
.fx-confetti{position:fixed;inset:0;pointer-events:none;z-index:9999}
.fx-c{position:absolute;width:10px;height:10px;background:hsl(calc(360*var(--h,.5)),90%,60%);transform:translate(-50%,-50%);border-radius:2px;animation:confThrow var(--t) ease-out forwards}
.fx-c:nth-child(4n){--h:.1}.fx-c:nth-child(4n+1){--h:.22}.fx-c:nth-child(4n+2){--h:.62}.fx-c:nth-child(4n+3){--h:.82}
@keyframes confThrow{to{transform:translate(calc(-50% + var(--dx)),calc(-50% + var(--dy))) rotate(var(--r));opacity:0}}

/* Search Results (kept once) */
.s-results{margin-top:.45rem;border:1px solid rgba(0,0,0,.06);border-radius:.75rem;background:#fff;box-shadow:0 8px 18px rgba(15,23,42,.08)}
.sr-empty{padding:.7rem 1rem;color:#94a3b8}
.sr-list{list-style:none;margin:0;padding:.25rem}
.sr-item{display:grid;grid-template-columns:1fr auto;gap:.35rem;align-items:center;padding:.55rem .7rem;border-radius:.6rem}
.sr-item + .sr-item{margin-top:.15rem}
.sr-item:hover{background:#f8fafc}
.sr-title{font-weight:700;color:#0f172a}
.sr-sub{font-size:.85rem;color:#64748b}
.sr-tags{display:flex;gap:.25rem;flex-wrap:wrap;margin-top:.2rem}
.sr-tag{font-size:.78rem;padding:.15rem .45rem;border:1px solid #e5e7eb;border-radius:999px;background:#fff}
.sr-use{padding:.35rem .6rem;border-radius:999px;border:1px solid #e5e7eb;background:#f6f5f2;white-space:nowrap}

/* Full-screen search overlay (kept once) */
.sr-ov{position:fixed;inset:0;z-index:60;display:grid;place-items:end center}
.sr-ov__scrim{position:absolute;inset:0;background:rgba(15,23,42,.35);backdrop-filter:blur(2px);opacity:0;transition:opacity .24s ease}
.sr-ov__panel{position:relative;width:100%;max-width:24.375rem;max-height:calc(100dvh - 20px);border-radius:16px 16px 0 0;background:#fff;box-shadow:0 -10px 30px rgba(15,23,42,.2);overflow:hidden;transform:translateY(16px);opacity:.0;transition:transform .28s cubic-bezier(.16,1,.3,1),opacity .24s ease}
.sr-ov:not(.u-hidden) .sr-ov__scrim{opacity:1}
.sr-ov:not(.u-hidden) .sr-ov__panel{transform:none;opacity:1}
.sr-ov__head{display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;border-bottom:1px solid #f1f5f9}
.sr-ov__head h3{margin:0;font-family:'Cormorant Garamond',serif;font-weight:600;letter-spacing:.02em}
.sr-ov__x{border:1px solid #e5e7eb;border-radius:.6rem;background:#fff;padding:.25rem .55rem}
.sr-ov__body{height:calc(100% - 56px);overflow:auto;padding:.6rem}

/* Utility */
.u-hidden{display:none!important}

/* ========== DARK MODE (consolidated) ========== */
body.is-dark{
  --dm-bg0:#0a1222;--dm-bg1:#0f1930;--dm-surface:#162540;--dm-border:#2c4676;
  --dm-text:#eaf2ff;--dm-strong:#f6fbff;--dm-muted:#b5c3de;
  --dm-chip:#0e1a31;--dm-cta1:#47d0ff;--dm-cta2:#6fa2ff;
  background:radial-gradient(120% 140% at 50% -25%,var(--dm-bg1),var(--dm-bg0) 60%);color:var(--dm-text)
}
body.is-dark .o-phone{background:var(--dm-bg1);box-shadow:0 10px 26px rgba(11,18,34,.55)}
body.is-dark .c-subtitle,body.is-dark .p-empty,body.is-dark .p-day__date{color:var(--dm-muted)}
body.is-dark .c-title--date{background:linear-gradient(180deg,#f5d773,#fae58f);color:#0c1019!important;box-shadow:0 6px 16px rgba(245,215,115,.28)}
body.is-dark .c-icon-btn,body.is-dark .c-logout{background:radial-gradient(120% 120% at 40% 30%,rgba(255,255,255,.06),rgba(255,255,255,0)),linear-gradient(160deg,#202f4c,#1a2742);color:var(--dm-text);border:1px solid var(--dm-border);box-shadow:0 10px 26px rgba(11,18,34,.55)}
body.is-dark .c-icon-btn--lemon{background:radial-gradient(140% 120% at 35% 30%, rgba(255,255,255,.08) 0%, rgba(255,255,255,.05) 45%, rgba(255,255,255,0) 70%),linear-gradient(180deg,#ffe077,#f4c54d);box-shadow:0 12px 28px rgba(245,215,115,.22),0 0 0 8px rgba(245,215,115,.12)}
body.is-dark #appNav.c-nav:not(.u-is-collapsed) .c-nav__panel{background:color-mix(in oklab,var(--dm-surface) 95%,transparent);border:1px solid var(--dm-border);box-shadow:0 10px 26px rgba(11,18,34,.55),inset 0 1px 0 rgba(255,255,255,.04)}
body.is-dark .c-search__input,body.is-dark .f-input{background:var(--dm-chip);color:var(--dm-text);border:1px solid var(--dm-border)}
body.is-dark input::placeholder{color:#9cb3d6;opacity:1}
body.is-dark .c-headbtn{background:var(--dm-chip);color:var(--dm-text);border:1px solid var(--dm-border)}
body.is-dark .c-headbtn.is-active{background:#0d63ff;color:#fff;border-color:transparent;box-shadow:0 12px 26px rgba(13,99,255,.32)}
body.is-dark .p-day,body.is-dark .p-daytask,body.is-dark .p-task{background:var(--dm-surface)!important;color:var(--dm-text)!important;border:1px solid var(--dm-border)!important;box-shadow:0 10px 26px rgba(11,18,34,.55),inset 0 1px 0 rgba(255,255,255,.04)!important}
body.is-dark .p-day__name,body.is-dark .p-dayview__title{color:var(--dm-strong)}
body.is-dark .p-daytask__time,body.is-dark .p-task__time{background:linear-gradient(180deg,#0f1b2f,#0d1728);border:1px solid #3b588b;color:#e4ecff}
body.is-dark .p-cell{background:#0f1b32;border:1px solid #2a4674;box-shadow:0 6px 16px rgba(13,99,255,.12)}
body.is-dark .p-cell__num{color:var(--dm-strong)}
body.is-dark .p-cell__num::after{background:radial-gradient(closest-side,transparent calc(100% - 6px),rgba(96,165,250,.85) 0 100%) top/100% 100% no-repeat,conic-gradient(#60a5fa var(--ring,0%),rgba(15,23,42,.35) 0);mix-blend-mode:screen;opacity:.9}
body.is-dark .p-cell--selected{box-shadow:inset 0 0 0 2px #6aa1ff;border-color:#3b63b0}
body.is-dark .p-cell--today{outline:2px solid #6aa1ff;outline-offset:1px}
body.is-dark .c-bottom-cta{background:transparent!important}
body.is-dark .c-cta{background:linear-gradient(90deg,var(--dm-cta1),var(--dm-cta2));color:#061222;border:0;box-shadow:0 14px 30px rgba(71,208,255,.24),0 6px 14px rgba(111,162,255,.22)}
body.is-dark .c-sheet__backdrop{background:rgba(6,12,24,.6)}
body.is-dark .c-sheet__panel{background:radial-gradient(200% 140% at 50% -20%, #121a2e 0%, #0f1a2d 55%, #0e1727 100%);border:1px solid rgba(232,196,92,.28);box-shadow:0 -14px 32px rgba(5,10,22,.82),inset 0 1px 0 rgba(255,255,255,.04)}
html[data-theme="dark"] .p-week .p-day__count{background:rgba(13,23,44,.9)}
html[data-theme="dark"] .p-month .p-cell__num::after{background:radial-gradient(closest-side,transparent calc(100% - 6px),rgba(96,165,250,.85) 0 100%) top/100% 100% no-repeat,conic-gradient(#60a5fa var(--ring,0%),rgba(96,165,250,.18) 0);mix-blend-mode:screen;opacity:.95}
/* --- Compact new-event FAB & bottom buttons --- */
.fab-new{width:56px;height:56px;margin:14px auto 8px;border-radius:999px}
.fab-new__svg{width:32px;height:32px}
.c-cta{inline-size:74%;block-size:2.8rem}
#btnExit{inline-size:74%;block-size:2.4rem}

/* --- Week header: push to corners cleanly --- */
.p-week .p-day__head{padding-inline:.6rem}
.p-week .p-day__name{justify-self:start}
.p-week .p-day__date{justify-self:end;font-weight:800}

/* --- Sheet: concise fields & chips --- */
.f-input--big{block-size:2.8rem}
.qp__chip{padding:.4rem .75rem;font-weight:700}

/* --- Month ring refinement (thin inner stroke + smooth fill) --- */
.p-month .p-cell{border-radius:16px}
.p-month .p-cell__num{font-weight:900}
.p-month .p-cell__num::after{
  inset:-9px;
  background:
    radial-gradient(closest-side, transparent calc(100% - 7px), var(--tone,#93c5fd) 0 100%) top/100% 100% no-repeat,
    conic-gradient(var(--tone,#3b82f6) var(--ring,0%), #e2e8f0 0);
  opacity:.96;
}
html[data-theme="dark"] .p-month .p-cell__num::after{
  background:
    radial-gradient(closest-side, transparent calc(100% - 7px), rgba(96,165,250,.85) 0 100%) top/100% 100% no-repeat,
    conic-gradient(#60a5fa var(--ring,0%), rgba(15,23,42,.35) 0);
  opacity:.92;
}

/* --- Sheet header close button hit area --- */
.c-sheet__header .c-icon-btn--ghost{padding:.2rem .5rem;border-radius:.75rem}
/* ====== LooZ • Tweak Pack — 2025-09-23 ====== */
/* 1) Exit button = like “create event” pill, just smaller */
.c-exit-wrap{display:flex;justify-content:center;padding:.2rem .4rem .8rem}
#btnExit.exit-pill{
  inline-size:72%; max-inline-size:15.25rem; block-size:2.5rem;
  border-radius:999px; border:0; cursor:pointer;
  background:linear-gradient(90deg,#0ea5e9,#2563eb);
  color:#fff; font-weight:800; letter-spacing:.02em;
  box-shadow:0 .6rem 1.2rem rgba(37,99,235,.28);
  display:grid; place-items:center;
}
#btnExit .exit-pill__svg{width:22px;height:22px}

/* keep “create event” pill a touch larger, same style family */
.c-bottom-cta{position:sticky;bottom:max(12px,env(safe-area-inset-bottom));display:grid;gap:.5rem;justify-items:center;background:transparent}
.c-cta.c-cta--bang{
  inline-size:78%; max-inline-size:16.25rem; block-size:2.9rem;
  border-radius:999px; border:0; font-weight:800; color:#fff;
  background:linear-gradient(90deg,#0ea5e9,#2563eb);
  box-shadow:0 .8rem 1.6rem rgba(37,99,235,.30);
}

/* 2) Week bar: make the two arrow buttons the exact same size */
.p-weekbar{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;margin:.35rem 0 .6rem;gap:.5rem}
.p-weekbar__right{justify-self:end;display:flex;gap:.35rem}
.p-weekbar__btn{
  border:1px solid #e5e7eb;background:#fff;border-radius:999px;
  height:36px;padding:0 14px;font-weight:700
}
/* icon arrows become perfect circles, same size left/right */
.p-weekbar__btn[data-weeknav="prev"],
.p-weekbar__btn[data-weeknav="next"]{
  width:36px;padding:0;display:grid;place-items:center;font-size:18px;line-height:1
}
/* optional: “היום” pill height matches the arrows */
.p-weekbar__btn[data-weeknav="today"]{height:36px}

/* 3) Month grid: thinner, consistent “envelopment” ring + tiny top counter */
.p-month{grid-template-columns:repeat(7,1fr);gap:.5rem}
.p-cell{position:relative;aspect-ratio:1/1;border-radius:16px;background:#fff;border:1px solid #edf2f7;box-shadow:0 4px 12px rgba(59,130,246,.10);display:grid;place-items:center}
.p-cell__num{position:relative;z-index:1;font-weight:900;color:#274c77}

/* ultra-thin dual ring — stroke ≈ 2.5px — uses --ring (0–100) and --tone from JS */
.p-cell__num::after{
  content:"";position:absolute;inset:-6px;border-radius:50%;pointer-events:none;z-index:0;
  background:
    radial-gradient(closest-side, transparent calc(100% - 3px), var(--tone,#c7d2fe) 0 100%) top/100% 100% no-repeat,
    conic-gradient(var(--tone,#3b82f6) var(--ring,0%), #e2e8f0 0);
  opacity:.92;mix-blend-mode:multiply
}
/* small numeric counter that never collides with the date */
.p-cell::before{
  content:attr(data-count);
  position:absolute;top:4px;left:6px;min-width:14px;height:14px;padding:0 4px;
  border-radius:999px;font:700 10px/14px 'Rubik',system-ui,sans-serif;
  color:#334155;background:#fff;border:1px solid color-mix(in srgb, var(--tone,#93c5fd) 65%, #94a3b8 35%);
  box-shadow:0 1px 2px rgba(0,0,0,.06);opacity:.85
}
/* off-month cells muted, but same ring thickness */
.p-cell--pad{background:#fafbfd;border-color:#f1f5f9}
.p-cell--pad .p-cell__num{color:#8da3bb}

/* “selected” and “today” halos kept delicate */
.p-cell--selected{box-shadow:inset 0 0 0 2px #3b82f6;border-color:#bfdbfe}
.p-cell--today{outline:2px solid #6aa1ff;outline-offset:1px}

/* 4) Pastel counter chips in week view (color changes every +3 tasks) */
.p-day__count{
  justify-self:center;inline-size:26px;height:26px;border-radius:50%;
  font:700 12px/26px 'Rubik',system-ui,sans-serif;border:1px solid transparent;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.06)
}
.p-day__count[data-band="0"]{background:rgba(148,163,184,.16);color:#475569;border-color:rgba(148,163,184,.35)}
.p-day__count[data-band="1"]{background:rgba(165,243,252,.22);color:#0e7490;border-color:rgba(34,211,238,.35)}   /* 1–3 */
.p-day__count[data-band="2"]{background:rgba(187,247,208,.22);color:#166534;border-color:rgba(34,197,94,.35)}    /* 4–6 */
.p-day__count[data-band="3"]{background:rgba(254,240,138,.25);color:#92400e;border-color:rgba(245,158,11,.40)}   /* 7–9 */
.p-day__count[data-band="4"]{background:rgba(252,231,243,.28);color:#9d174d;border-color:rgba(236,72,153,.38)}   /* 10–12 */
.p-day__count[data-band="5"]{background:rgba(221,214,254,.28);color:#5b21b6;border-color:rgba(167,139,250,.40)}  /* 13–15 */
.p-day__count[data-band="6"]{background:rgba(191,219,254,.28);color:#1d4ed8;border-color:rgba(96,165,250,.40)}   /* 16–18 */
.p-day__count[data-band="7"]{background:linear-gradient(90deg,rgba(34,211,238,.18),rgba(244,114,182,.18));color:#7c3aed;border-color:rgba(124,58,237,.40)} /* 19+ */

/* dark-mode equivalents */
html[data-theme="dark"] #btnExit.exit-pill{
  background:linear-gradient(90deg,#22d3ee,#60a5fa); box-shadow:0 .6rem 1.2rem rgba(15,23,42,.55)
}
html[data-theme="dark"] .p-weekbar__btn{background:#0e1a31;color:#eaf2ff;border:1px solid #2c4676}
html[data-theme="dark"] .p-cell{background:#0f1b32;border:1px solid #2a4674;box-shadow:0 4px 12px rgba(13,99,255,.12)}
html[data-theme="dark"] .p-cell__num{color:#eaf2ff}
html[data-theme="dark"] .p-cell__num::after{
  background:
    radial-gradient(closest-side, transparent calc(100% - 3px), rgba(96,165,250,.85) 0 100%) top/100% 100% no-repeat,
    conic-gradient(#60a5fa var(--ring,0%), rgba(15,23,42,.35) 0);
  mix-blend-mode:screen;opacity:.9
}
html[data-theme="dark"] .p-cell::before{background:rgba(13,23,44,.92);color:#cbd5e1;border-color:#334155}

/* 5) Header lemon: perfectly centered under the title and larger */
.o-header{
  grid-template-columns:1fr auto 1fr;
  grid-template-rows:auto auto auto auto;
  align-items:center;text-align:center
}
.c-app-title{grid-column:2;grid-row:1}
#lemonToggle.c-icon-btn--lemon{
  grid-column:2;grid-row:2;justify-self:center;
  inline-size:3.1rem;block-size:3.1rem;border-radius:1rem
}
/* keep profile/settings sized like each other */
#btnProfile,#btnMenu{inline-size:2.2rem;block-size:2.2rem}

/* 6) Week tasks inside the expanded day — compact buttons same size as day view */
.p-task__btn,.p-daytask__btn{padding:.26rem .52rem;border-radius:.65rem;border:1px solid #e5e7eb;background:#fff;font-size:.84rem}
/* === LooZ – 2025-09-23 Special tweaks === */

/* Month counter: top–center, small, never collides with the date */
.p-cell::before{
  content:attr(data-count);
  position:absolute;
  top:-6px; left:50%; transform:translateX(-50%);
  min-width:16px; height:16px; padding:0 6px;
  border-radius:999px;
  font:700 10px/16px 'Rubik',system-ui,sans-serif;
  color:#334155;
  background:#fff;
  border:1px solid color-mix(in srgb, var(--tone,#93c5fd) 65%, #94a3b8 35%);
  box-shadow:0 1px 2px rgba(0,0,0,.06);
  opacity:.9;
}

/* By default, hide the circular “envelopment” ring */
.p-month .p-cell__num::after{ display:none; }

/* ...but for TODAY only, show a refined golden halo + soft shimmer */
@keyframes looz-gold-glow {
  0%,100% { box-shadow: 0 0 0 0 rgba(232,196,92,.28), 0 8px 22px rgba(199,154,41,.18); }
  50%     { box-shadow: 0 0 0 3px rgba(232,196,92,.18), 0 12px 28px rgba(199,154,41,.24); }
}
.p-cell--today .p-cell__num{
  position:relative;
  animation: looz-gold-glow 2.4s ease-in-out infinite;
  color: #c6522b;
}
.p-cell--today .p-cell__num::after{
  display:block;
  content:"";
  position:absolute; inset:-7px; border-radius:50%; pointer-events:none; z-index:0;
  /* inner thin stroke + golden conic sheen */
  background:
    radial-gradient(closest-side, transparent calc(100% - 3px), rgba(249,208,95,.95) 0 100%) top/100% 100% no-repeat,
    conic-gradient(
      from 90deg,
      #f5d36d 0deg,
      #f0c96c 80deg,
      #d5a84f 140deg,
      #ffe69a 200deg,
      #f5d36d 260deg,
      #f0c96c 320deg,
      #f5d36d 360deg
    );
  mix-blend-mode:plus-lighter;
  opacity:.98;
}

/* Make sure selected state doesn’t thicken the ring on non-today cells */
.p-cell--selected:not(.p-cell--today){ box-shadow:inset 0 0 0 2px #3b82f6; }

/* Dark mode tune for the counter chip */
html[data-theme="dark"] .p-cell::before{
  background:rgba(13,23,44,.92); color:#cbd5e1;
  border-color:#334155;
}
/* === Month view: yellow marker behind today's date (matches header badge) === */
.p-cell--today .p-cell__num{
  position:relative;
  z-index:1;                /* keep number above the marker */
  color:#0f172a;            /* readable on yellow */
  font-weight:900;
}

/* the yellow pill */
.p-cell--today .p-cell__num::before{
  content:"";
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  height:1.6em;             /* pill height */
  padding:0 .6em;           /* pill width auto by padding */
  border-radius:999px;
  background:linear-gradient(180deg,#FFE487,#F8CF45);
  border:1px solid #E6C34A;
  box-shadow:
    0 2px 6px rgba(0,0,0,.08),
    inset 0 0 .4rem rgba(255,255,255,.55);
  z-index:-1;               /* sit behind the number */
}

/* keep your elegant gold ring for today’s cell */
.p-cell--today{
  --ring-color:#e8c65c;
}
/* --- Day-only nav arrows (match week/month style) --- */
.p-weekbar[data-scope="day"] .p-weekbar__btn[data-daynav="prev"],
.p-weekbar[data-scope="day"] .p-weekbar__btn[data-daynav="next"] {
  width:36px;
  height:36px;
  padding:0;
  border-radius:999px;
  border:1px solid #e5e7eb;
  background:#fff;
  display:grid;
  place-items:center;
  font-size:18px;
  font-weight:800;
  line-height:1;
}
/* ===== MONTH VIEW — ring + counter color sync, tomato glow for TODAY ===== */

/* 1) Keep the small counter; color & border = tone/ring-color */
.p-month .p-count{
  color: var(--ring-color, #94a3b8) !important;
  border-color: var(--ring-color, #94a3b8) !important;
  background: #fff !important;
}

/* 2) Remove any legacy pill/cap or square highlight behind the number */
.p-month .p-cell .p-cell__num::before{ display:none !important; }
.p-month .p-cell.p-cell--today{ box-shadow:none !important; outline:none !important; }

/* 3) Re-enable the circular ring around the number.
      Its color follows --ring-color which you already set in JS per day. */
.p-month .p-cell .p-cell__num{
  position: relative;
  z-index: 1;
  font-weight: 900;
}
.p-month .p-cell .p-cell__num::after{
  content: "";
  display: block !important;            /* override any previous 'display:none' */
  position: absolute;
  inset: -7px;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(closest-side, transparent calc(100% - 3px), var(--ring-color,#94a3b8) 0 100%) top/100% 100% no-repeat,
    conic-gradient(var(--ring-color,#94a3b8) var(--ring,0%), #e2e8f0 0);
  opacity: .95;
  mix-blend-mode: multiply;
}

/* 4) TODAY: number glows in tomato (no background square). */
.p-month .p-cell.p-cell--today .p-cell__num{
  color: tomato !important; /* #FF6347 */
  text-shadow:
    0 0 8px rgba(255,99,71,.55),
    0 0 16px rgba(255,99,71,.35);
}

/* Dark mode parity */
html[data-theme="dark"] .p-month .p-count{
  background: rgba(13,23,44,.92) !important;
}
html[data-theme="dark"] .p-month .p-cell .p-cell__num{ color:#eaf2ff; }
html[data-theme="dark"] .p-month .p-cell .p-cell__num::after{
  background:
    radial-gradient(closest-side, transparent calc(100% - 3px), var(--ring-color,#60a5fa) 0 100%) top/100% 100% no-repeat,
    conic-gradient(var(--ring-color,#60a5fa) var(--ring,0%), rgba(15,23,42,.35) 0);
  opacity: .92;
  mix-blend-mode: screen;
}
/* ===== Month view — single ring, tone-synced counter, gold glow for TODAY ===== */

/* 0) Neutralize previous multi-ring/halo rules */
.p-month .p-cell .p-cell__num::before,
.p-month .p-cell .p-cell__num::after{
  display:none !important;
}
.p-month .p-cell.p-cell--today{
  box-shadow:none !important;
  outline:none !important;
}

/* 1) One border around the date cell; color = tone (set in JS as --ring-color) */
.p-month .p-cell{
  border:2px solid var(--ring-color, #cbd5e1) !important;
  box-shadow:none !important;
  background:#fff;
}

/* 2) Date number styling */
.p-month .p-cell .p-cell__num{
  position:relative;
  z-index:1;
  font-weight:900;
  color:#0f172a;
}

/* 3) TODAY: number glows in gold; keep the same tone border */
.p-month .p-cell.p-cell--today .p-cell__num{
  color:#0f172a;
  text-shadow:
    0 0 6px rgba(232,196,92,.55),
    0 0 14px rgba(232,196,92,.35);
}

/* 4) Counter: keep at the top, NO border; text color = tone */
.p-month .p-count{
  position:absolute;
  top:-9px; left:50%; transform:translateX(-50%);
  min-width:18px; height:18px; padding:0 6px;
  border-radius:999px; display:grid; place-items:center;
  font:800 10px/18px 'Rubik',system-ui,sans-serif;
  background:#fff !important;
  border:0 !important;                 /* no border */
  color:var(--ring-color, #94a3b8) !important; /* same color as date border */
  box-shadow:none !important;
}

/* 5) Off-month cells muted but still single-ringed */
.p-month .p-cell.p-cell--pad{
  background:#fafafc;
  border-color:#e5e7eb !important;
}
.p-month .p-cell.p-cell--pad .p-cell__num{ color:#9aa4b2; }

/* Dark mode parity */
html[data-theme="dark"] .p-month .p-cell{
  background:#0f1b32;
  border-color:var(--ring-color, #2a4674) !important;
}
html[data-theme="dark"] .p-month .p-count{
  background:rgba(13,23,44,.92) !important;
  color:var(--ring-color, #60a5fa) !important;
}
html[data-theme="dark"] .p-month .p-cell .p-cell__num{ color:#eaf2ff; }
/* === Month view: cleanup === */

/* Remove any background pill or halo that shows up behind counters */
.p-month .p-cell::before,
.p-month .p-cell__num::before,
.p-month .p-cell__num::after {
  display: none !important;
}

/* One border around the cell (tone-colored), no extra square */
.p-month .p-cell {
  border: 2px solid var(--ring-color, #cbd5e1) !important;
  box-shadow: none !important;
  background: #fff;
  position: relative;
}

/* Task counter: floating number only, no border, no background */
.p-month .p-count {
  position: absolute;
  top: -9px; left: 50%;
  transform: translateX(-50%);
  min-width: 18px; height: 18px; padding: 0 6px;
  font: 800 10px/18px 'Rubik', system-ui, sans-serif;
  background: transparent !important;   /* no pill */
  border: 0 !important;                 /* no border */
  color: var(--ring-color, #94a3b8) !important; /* same color as cell border */
  box-shadow: none !important;
}

/* Number inside cell */
.p-month .p-cell__num {
  font-weight: 900;
  color: #0f172a;
  position: relative;
  z-index: 1;
}

/* TODAY: number itself glows gold, no square behind it */
.p-month .p-cell--today .p-cell__num {
  color: tomato; /* number color */
  text-shadow:
    0 0 6px rgba(232,196,92,.65),
    0 0 14px rgba(232,196,92,.45),
    0 0 22px rgba(232,196,92,.35);
}

/* Off-month cells muted */
.p-month .p-cell.p-cell--pad {
  background: #fafafc;
  border-color: #e5e7eb !important;
}
.p-month .p-cell.p-cell--pad .p-cell__num {
  color: #9aa4b2;
}

/* === Dark mode === */
html[data-theme="dark"] .p-month .p-cell {
  background: #0f1b32;
  border-color: var(--ring-color, #2a4674) !important;
}
html[data-theme="dark"] .p-month .p-count {
  background: transparent !important;
  color: var(--ring-color, #60a5fa) !important;
}
html[data-theme="dark"] .p-month .p-cell__num {
  color: #eaf2ff;
}
html[data-theme="dark"] .p-month .p-cell--today .p-cell__num {
  color: gold;
  text-shadow:
    0 0 6px rgba(245,215,115,.65),
    0 0 14px rgba(245,215,115,.45),
    0 0 22px rgba(245,215,115,.35);
}
/* ===== Month view fixes: counter above ring + number-only glow for TODAY ===== */

/* Make the cell a stacking context so children can layer above its border */
.p-month .p-cell{
  position: relative;
  border: 2px solid var(--ring-color, #cbd5e1) !important;
  box-shadow: none !important;
  background: #fff;
  overflow: visible; /* keep counter visible above the ring */
}

/* Counter: keep exact position, but ensure it's ABOVE the border/ring */
.p-month .p-count{
  position: absolute;
  top: -9px; left: 50%;
  transform: translateX(-50%);
  min-width: 18px; height: 18px; padding: 0 6px;
  font: 800 10px/18px 'Rubik', system-ui, sans-serif;
  background: transparent !important; /* no pill */
  border: 0 !important;               /* no border */
  color: var(--ring-color, #94a3b8) !important;
  box-shadow: none !important;
  z-index: 5;                          /* <-- on top of the border */
}

/* Nuke any legacy caps/halos behind the number to guarantee "number only" */
.p-month .p-cell .p-cell__num::before,
.p-month .p-cell .p-cell__num::after{
  display: none !important;
}

/* Date number base style */
.p-month .p-cell .p-cell__num{
  position: relative;
  z-index: 2;            /* below counter, above border */
  font-weight: 900;
  color: #0f172a;
}

/* Number-only glow animation for TODAY (no square/pill) */
@keyframes looz-number-glow {
  0%, 100% {
    text-shadow:
      0 0 6px rgba(232,196,92,.50),
      0 0 12px rgba(232,196,92,.35);
  }
  50% {
    text-shadow:
      0 0 10px rgba(232,196,92,.70),
      0 0 20px rgba(232,196,92,.50);
  }
}

/* Apply the animated glow to the number itself; color = tomato as requested */
.p-month .p-cell.p-cell--today .p-cell__num{
  color: tomato !important; /* #FF6347 */
  animation: looz-number-glow 2.2s ease-in-out infinite;
}

/* Off-month cells muted */
.p-month .p-cell.p-cell--pad{
  background:#fafafc;
  border-color:#e5e7eb !important;
}
.p-month .p-cell.p-cell--pad .p-cell__num{ color:#9aa4b2; }

/* ---- Dark mode parity ---- */
html[data-theme="dark"] .p-month .p-cell{
  background:#0f1b32;
  border-color: var(--ring-color, #2a4674) !important;
}
html[data-theme="dark"] .p-month .p-count{
  color: var(--ring-color, #60a5fa) !important;
  background: transparent !important;
}
html[data-theme="dark"] .p-month .p-cell .p-cell__num{ color:#eaf2ff; }
html[data-theme="dark"] .p-month .p-cell.p-cell--today .p-cell__num{
  color: gold !important; /* looks better on dark; change to tomato if you prefer */
  animation: looz-number-glow 2.2s ease-in-out infinite;
}
/* ===== Month view — one border, real top counter pill, tomato glow for TODAY ===== */

/* 0) Kill any legacy pseudo-counter or old halos/squares */
.p-month .p-cell::before,
.p-month .p-cell .p-cell__num::before,
.p-month .p-cell .p-cell__num::after{
  display:none !important;
}

/* 1) Cell = single tone-colored border (tone comes from --ring-color set in JS) */
.p-month .p-cell{
  position:relative;
  background:#fff;
  border:2px solid var(--ring-color, #cbd5e1) !important;
  box-shadow:none !important;
  border-radius:16px;
  overflow:visible; /* allow the counter pill to float above */
}

/* 2) Date number base */
.p-month .p-cell .p-cell__num{
  position:relative;
  z-index:1;                 /* below counter, above border */
  font-weight:900;
  color:#0f172a;
}

/* 3) Real counter pill (top-center). Text + pill border color = ring/tone */
.p-month .p-count{
  position:absolute;
  top:-9px;
  left:50%;
  transform:translateX(-50%);
  min-width:22px; height:22px;            /* size like in your screenshot */
  padding:0 8px;
  border-radius:999px;
  display:grid; place-items:center;
  font:800 12px/22px 'Rubik',system-ui,sans-serif;

  color:var(--ring-color, #94a3b8) !important;
  background:#fff !important;
  border:2px solid var(--ring-color, #94a3b8) !important;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
  z-index:5;                               /* keeps it above the cell border */
  pointer-events:none;
}

/* 4) TODAY — number only glows (no square), in tomato with a gentle pulse */
@keyframes loozTomatoGlow {
  0%,100% {
    text-shadow:
      0 0 6px rgba(255,99,71,.55),
      0 0 14px rgba(255,99,71,.35);
  }
  50% {
    text-shadow:
      0 0 10px rgba(255,99,71,.75),
      0 0 22px rgba(255,99,71,.50);
  }
}
.p-month .p-cell.p-cell--today .p-cell__num{
  color:tomato !important;                 /* the 23 itself */
  animation:loozTomatoGlow 2.2s ease-in-out infinite;
}

/* 5) Off-month cells muted but still single-ringed */
.p-month .p-cell.p-cell--pad{
  background:#fafafc;
  border-color:#e5e7eb !important;
}
.p-month .p-cell.p-cell--pad .p-cell__num{ color:#9aa4b2; }

/* 6) Dark mode parity */
html[data-theme="dark"] .p-month .p-cell{
  background:#0f1b32;
  border-color:var(--ring-color, #2a4674) !important;
}
html[data-theme="dark"] .p-month .p-count{
  background:rgba(13,23,44,.92) !important;
  color:var(--ring-color, #60a5fa) !important;
  border-color:var(--ring-color, #60a5fa) !important;
  box-shadow:0 2px 6px rgba(0,0,0,.28);
}
html[data-theme="dark"] .p-month .p-cell .p-cell__num{ color:#eaf2ff; }
html[data-theme="dark"] .p-month .p-cell.p-cell--today .p-cell__num{
  /* keep tomato in dark too—swap to gold if you prefer */
  color:tomato !important;
}
/* === Month counter pill — smaller size, same position === */
.p-month .p-count{
  /* keep same place (adjusted for new height): */
  top:-7px;                   /* was -9px when height was 22px */

  /* smaller pill */
  min-width:18px;
  height:18px;
  padding:0 6px;
  border-radius:999px;

  /* smaller number */
  font:800 10px/18px 'Rubik',system-ui,sans-serif;

  /* same colors/behavior */
  color:var(--ring-color, #94a3b8) !important;
  background:#fff !important;
  border:1.5px solid var(--ring-color, #94a3b8) !important;
  box-shadow:0 1px 3px rgba(0,0,0,.08);
  z-index:5;
}

/* dark mode parity for the smaller pill */
html[data-theme="dark"] .p-month .p-count{
  background:rgba(13,23,44,.92) !important;
  color:var(--ring-color, #60a5fa) !important;
  border-color:var(--ring-color, #60a5fa) !important;
  box-shadow:0 1px 3px rgba(0,0,0,.28);
}
