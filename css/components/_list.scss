@use '../settings/tokens' as *;
@use '../tools/mixins' as *;

/* ---------- List wrapper ---------- */
.c-list {
  direction: rtl;
  width: 100%;
  max-width: 22.5rem;
  margin-inline: auto;
  padding-inline: $sp-16;
}

/* ---------- Header row: title + full-width “בוצע” chip ---------- */
.c-listhead {
  width: 100%;
  max-width: 22.5rem;
  margin-inline: auto;
  padding-inline: $sp-16;
  display: grid;
  gap: $sp-10;
  justify-items: center;
}

.c-section-title {
  margin: 0;
  text-align: center;
  font-weight: 700;
  letter-spacing: .015em;
  color: $neutral-900;
}

.c-completed-chip {
  width: 100%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  padding: $sp-8 $sp-12;
  border-radius: 999rem;
  border: 1px solid rgba(0,0,0,.08);
  background: linear-gradient(145deg,#F8F5EF,#EDE7DC);
  color: #2b2b44;
  font-weight: 600;
  cursor: pointer;
  transition: transform $motion-150 $ease-out, box-shadow $motion-150 $ease-out;

  &:hover { transform: translateY(-1px); box-shadow: 0 .25rem .5rem rgba(0,0,0,.08); }
}

/* ---------- Lists share spacing ---------- */
.c-list__items,
.c-completed__list {
  display: grid;
  gap: $sp-12;
  margin: 0;
  padding: 0;
  list-style: none;
}

/* ---------- Unified task row (RTL): [checkbox | text | minus] ---------- */
.c-item {
  display: grid;
  grid-template-columns: auto 1fr auto;   /* check | text | minus */
  grid-template-areas: "check text minus";
  align-items: center;
  gap: $sp-10;
  min-block-size: 2.75rem;                /* ~44px touch target */
  padding: $sp-10 $sp-12;
  border: 1px solid rgba(0,0,0,.06);
  border-radius: $radius-12;
  background: linear-gradient(180deg, #fff, #f9fbff);
  box-shadow: 0 1px 0 rgba(0,0,0,.02);
}

.c-item__label { display: contents; }

.c-item__check  {
  grid-area: check;
  justify-self: end;
  inline-size: 1.25rem;
  block-size: 1.25rem;
  margin: 0;
  accent-color: #F7C843;

  &:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 .125rem rgba(0,0,0,.05),
      0 0 0 .35rem rgba(247,200,67,.35);
  }
  &:checked {
    box-shadow:
      0 0 0 .125rem rgba(247,200,67,.25),
      0 0 .75rem .15rem rgba(247,200,67,.35);
    transform: translateY(-.5px);
  }
}

.c-item__text   {
  grid-area: text;
  justify-self: start;
  font-size: 1rem;
  line-height: 1.35;
  color: #1f2937;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.c-item__remove {
  grid-area: minus;
  justify-self: start;
  inline-size: 1.75rem;
  block-size: 1.75rem;
  border: 0;
  background: transparent;
  color: #7C3AED;
  font-size: 1.4rem;
  line-height: 1;
  display: grid;
  place-items: center;
  cursor: pointer;
  filter: drop-shadow(0 0 6px rgba(124,58,237,.35));
  transition: transform 140ms $ease-out, filter 140ms $ease-out;

  &:hover { transform: translateY(-1px); filter: drop-shadow(0 0 10px rgba(124,58,237,.5)); }
}

/* ---------- Completed list: same width, no real checkbox (phantom keeps spacing) ---------- */
#completedList .c-item          { grid-template-areas: "check text minus"; grid-template-columns: auto 1fr auto; }
#completedList .c-item__phantom { grid-area: check; inline-size: 1.25rem; block-size: 1.25rem; }
#completedList .c-item__text    { grid-area: text; color: #256b4c; font-weight: 500; }
#completedList .c-item__remove  { grid-area: minus; }

/* ---------- Completion animation (tasks only) ---------- */
.c-item.is-completing .c-item__text { animation: strike-fade 560ms cubic-bezier(.2,.7,.2,1) forwards; }
@keyframes strike-fade {
  0%   { text-decoration: none; opacity: 1; }
  35%  { text-decoration: line-through; text-decoration-color: #36ADC1; }
  100% { text-decoration: line-through; opacity: 0; }
}

/* ---------- Confetti particles ---------- */
.c-confetti {
  position: absolute;
  pointer-events: none;
  will-change: transform, opacity;
  border-radius: 2px;
}
