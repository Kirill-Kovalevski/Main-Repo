/* Calendar/css/components/_list.scss */
@use '../settings/tokens' as *;
@use '../tools/mixins' as *;

/* =======================================
   LIST: Titles, Containers, Rows (RTL)
   ======================================= */

/* Wrapper for the list section */
.c-list {
  direction: rtl;
  width: 100%;
  max-width: 22.5rem;          /* iPhone-ish width container */
  margin-inline: auto;
  padding-inline: $sp-16;
}

/* Section titles */
.c-section-title,
.c-list__title {
  margin: 0;
  margin-block: $sp-16;
  text-align: center;
  font-weight: 700;
  letter-spacing: 0.015em;
  line-height: 1.2;
  color: $neutral-900;
}

/* Optional: gradient title (you can add this class to “בוצע”) */
.c-list__title--completed {
  display: inline-block;
  background: linear-gradient(90deg, #6bcf8e, #9be7b2, #b9fbc0);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
}

.c-list__items {
  list-style: none;
  margin: 0;
  padding: 0;
}

.c-item {
  display: grid;
  grid-template-columns: auto 1fr auto; /* col1 = left, col3 = right (grid is LTR) */
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.5rem 0.375rem;
  border-bottom: 1px solid rgba(0,0,0,.06);
}

/* Let label’s children participate in the grid */
.c-item__label {
  display: contents; /* allows checkbox + text to place into grid columns */
}

/* Place each piece explicitly */
.c-item__remove { grid-column: 1; justify-self: start; } /* LEFT edge */
.c-item__text   { grid-column: 2; justify-self: start; } /* middle */
.c-item__check  { grid-column: 3; justify-self: end;   }

/* Text */
.c-item__text {
  font-size: 1rem;
  line-height: 1.35;
  color: $neutral-900;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Minus button — clean, vibrant, blurred; no border */
.c-item__remove {
  inline-size: 1.75rem;
  block-size: 1.75rem;
  padding: 0;
  border: 0;
  background: transparent;
  color: #7C3AED;                 /* vibrant purple */
  font-size: 1.4rem;
  line-height: 1;
  display: grid;
  place-items: center;
  cursor: pointer;
  filter: drop-shadow(0 0 6px rgba(124, 58, 237, .35));
  transition:
    transform $motion-150 $ease-out,
    filter    $motion-150 $ease-out;

  &:hover   { transform: translateY(-1px); filter: drop-shadow(0 0 10px rgba(124,58,237,.5)); }
  &:active  { transform: translateY(0); }
  &:focus-visible { @include focus-ring; }
}

/* Checkbox: soft gold pastel glow when checked */
.c-item__check {
  inline-size: 1.25rem;
  block-size: 1.25rem;
  margin: 0;
  accent-color: #F7C843; /* pastel gold */
  border-radius: .375rem;
  box-shadow: 0 0 0 0 rgba(247,200,67,0);
  transition: box-shadow 180ms cubic-bezier(.16,1,.3,1),
              transform 120ms cubic-bezier(.16,1,.3,1);
  &:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 .125rem rgba(0,0,0,.05),
      0 0 0 .35rem rgba(247,200,67,.35);
  }
  &:checked {
    box-shadow:
      0 0 0 .125rem rgba(247,200,67,.25),
      0 0 .75rem .15rem rgba(247,200,67,.35);
    transform: translateY(-.5px);
  }
}


/* ==============================
   COMPLETION: strike & fade
   ============================== */

/* Add this class from JS to the <li> when the checkbox is ticked */
.c-item.is-completing .c-item__text {
  position: relative;
  animation: strike-fade 560ms cubic-bezier(.2,.7,.2,1) forwards;
}

/* colorful strike grows left→right over the text */
.c-item.is-completing .c-item__text::after {
  content: '';
  position: absolute;
  inset-inline-start: 0;
  inset-block-start: 50%;
  transform: translateY(-50%);
  inline-size: 0;
  block-size: 0.125rem;
  border-radius: 999rem;
  background: linear-gradient(
    90deg,
    #ff6b6b,
    #ffd93d,
    #6bcb77,
    #4d96ff,
    #b8c0ff,
    #f896d8
  );
  animation: strike-grow 500ms $ease-in-out forwards;
}

@keyframes strike-grow {
  to { inline-size: 100%; }
}

@keyframes strike-fade {
  0%   { text-decoration: none; opacity: 1; }
  35%  { text-decoration: line-through; text-decoration-color: #36ADC1; }
  100% { text-decoration: line-through; opacity: 0; }
}

/* =======================================
   COMPLETED LIST LOOK (no checkbox)
   Keeps 3-column rhythm via a phantom cell
   ======================================= */

.c-item--done {
  background: linear-gradient(180deg, #ffffff, #f8fbff);
  border-color: rgba($teal, .25);
}

.c-item--done .c-item__remove { grid-column: 1; }
.c-item--done .c-item__text   { grid-column: 2; color: #258e55; font-weight: 500; }

/* Third column placeholder so widths match active rows */
.c-item--done .c-item__phantom {
  grid-column: 3;
  inline-size: 1.25rem;
  block-size: 1.25rem;
}

/* =======================================
   CONFETTI PARTICLES (JS positions/animates)
   ======================================= */

.c-confetti {
  position: absolute;
  pointer-events: none;
  will-change: transform, opacity;
  border-radius: 2px;
}
/* Task row grid: [col1] [col2] [col3]  → auto 1fr auto  */
.c-item {
  display: grid;
  grid-template-columns: auto 1fr auto;   // [minus] [text] [checkbox]
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.375rem;
  border-bottom: 1px solid rgba(0,0,0,.06);
}

/* Let label’s children participate in the grid */
.c-item__label { display: contents; }

/* RTL placement (final): minus on the RIGHT, text in middle, checkbox on LEFT */
.c-item__remove { grid-column: 1; }             // right edge
.c-item__text   { grid-column: 2; justify-self: start; }
.c-item__check  { grid-column: 3; }             // left edge

/* Completed items keep the same 3 columns */
.c-item--done .c-item__remove { grid-column: 1; }
.c-item--done .c-item__text   { grid-column: 2; }
.c-item--done .c-item__phantom{ grid-column: 3; }


